!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Formy",[],e):"object"==typeof exports?exports.Formy=e():n.Formy=e()}(self,(function(){return function(){"use strict";var n={d:function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},o:function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r:function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},e={};n.r(e),n.d(e,{entry:function(){return s},init:function(){return f},instances:function(){return p}});var t=["","","formy-jssdk.js"].filter((function(n){return n})).join("/"),o=[],r=[];function i(){return"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,(function(n){return(Number(n)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(n)/4).toString(16)}))}var c=function(){function n(n){this.config=n,this.uuid=i(),r.push(this)}return n.prototype.init=function(){var n=this,e=this.config.el;if(e){var t=document.createElement("iframe"),o=document.querySelector(e);t.title="Formy",t.frameBorder="0",t.scrolling="no",t.width="100%",o&&(t.onload=function(){n.appendElements(t),n.appendBase(t),n.appendScripts(t),n.resizeObserver(t)},o.replaceChildren(t))}},n.prototype.appendElements=function(n){var e=n.contentWindow.document.body,t=document.createElement("div");t.id="root",e.appendChild(t)},n.prototype.appendScripts=function(n){var e=n.contentWindow.document.head,o=document.createElement("script");o.src=t,o.onerror=function(){console.error("formy sdk script load failed!")};var r=document.createElement("script"),i=document.createTextNode("\nfunction initFormy(Formy) {\n  const instance = parent.window.Formy.instances.find((ins) => {\n    return ins.uuid === '".concat(this.uuid,'\';\n  });\n  var config = Object.assign({}, instance.config, {el: "#root"})\n  new Formy(config);\n}\n      '));r.appendChild(i),e.append(r),e.appendChild(o)},n.prototype.appendBase=function(n){var e=n.contentWindow.document.head,t=document.createElement("base");t.href=window.location.href,e.appendChild(t)},n.prototype.resizeObserver=function(n){var e=n.contentWindow.document.body;new ResizeObserver((function(e){window.requestAnimationFrame((function(){var t;Array.isArray(e)&&e.length&&(t=e[0].target.scrollHeight.toString(),n&&(n.height=t))}))})).observe(e)},n}(),u=function(){function n(n){this.config=n,this.uuid=i(),r.push(this)}return n.prototype.init=function(){var n=this;this.config.el&&this.loadScript((function(){new window.FormySDK.API(n.config)}))},n.prototype.loadScript=function(n){if(window.FormySDK)null==n||n();else{var e=document.head,o=document.createElement("script");o.onload=function(){return null==n?void 0:n()},o.src=t,e.appendChild(o)}},n}(),a=function(){function n(n){"inline"===n.mode?this.entry=new u(n):this.entry=new c(n)}return n.prototype.init=function(){var n;null===(n=this.entry)||void 0===n||n.init()},n}(),d=function(){o.forEach((function(n){new a(n).init()}))};"complete"!==document.readyState?document.onreadystatechange=function(){"complete"===document.readyState&&d()}:d();var f=function(n){o.push(n)},p=r,s=a;return e}()}));
//# sourceMappingURL=formy-entry.js.map